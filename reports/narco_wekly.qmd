---
title: "Análisis de la cobertura en medios digitales del tema: 'Narcotráfico'"
author:
- familyname: Castillo
  othernames: Diego F
  qualifications: Inteligencia Estratégica
- familyname: Castillo
  othernames: Claudio S
  qualifications: Investigación y Desarrollo
email: castilloclaudiosebastian@gmail.com
phone: (54) 9-11-26794601
department: Consulting
organization: Willow - Semantic Technologies
number-sections: true
fig-height: 5
fig-width: 8
cite-method: biblatex
bibliography: references.bib
biblio-style: authoryear-comp
linestretch: 1 # alternative 1.5
format: report-pdf
execute:
  echo: false
  warning: false
  message: false
---
```{python}
import sys
sys.path.append('../src')
from process import *
from database import *
from process import *
```

```{python}
#| tags: [parameters]
from datetime import date
start_date = "2023-08-17"
end_date = str(date.today())
topic = "narcotráfico"
```

```{python}
collection_news = get_collection(host='mongodb://localhost:27017/', db_name='wdocuments', collection_name='news')
news = get_news(collection_news, start_date, end_date, topic, embed=False)

collection_newsner = get_collection(host='mongodb://localhost:27017/', db_name='wdocuments', collection_name='newsner')
newsner = get_ner_byindex(collection_newsner, news)
# Processing
news = consolidate_news(news)
newsner = consolidate_ner(newsner)
# Tabla de Estadística por Provincia
newstat = get_news_stat(news, newsner)
# Tabla de noticas
table_news = table_news(news, type='abstract')
table_news.drop(columns=['autores', 'portal'], inplace=True)

```

# Intoducción

```{python, text.align = 'left'}
from IPython.display import display, Markdown
sd = start_date
ed = end_date
display(Markdown(
f"""
En este documento presentamos un análisis de la cobertura realizada sobre el tema **{topic}** entre los días {sd} y {ed}.  Los medios incluidos en nuestra base de seguimiento incluyen portales de noticias de todas las provincias, dando cobertura nacional al estudio. Dicho listado se puede ampliar o reconfigurar a demanda según necesidades particulares de nuestros clientes. 
"""
))
```

En lo que respecta a metodología empleamos *búsqueda semántica* y *algoritmos inteligentes* para el procesamiento de información. El resultado del documento debe brindar un conocimiento sistemático y actualizado del tópico en estudio bajo el **enfoque de los medios de comunicación**, con acceso a datos desagregados sobre eventos, personas, lugares y organizaciones asociadas al tema. En esta versión inicial de nuestro análisis nos concentramos en la presentación de los datos recuperados, dejando para solicitudes particulares estudios más avanzados sobre modelos, patrones y proyecciones. 

```{python}
#| label: graph-stat
#| fig-cap: "Cantidad de noticias por Provincia"

plot_dataframe(newstat, 
               x_col="cantidad_noticias", 
               y_col="provincia", 
               x_label="Cantidad de Noticias", 
               y_label="Provincias", 
               title="Cantidad de Noticias por Provincia")
```

# Estadística de noticias por provincia

```{python, text.align = 'left'}
from IPython.display import display, Markdown
t = topic
display(Markdown(
f"""
En esta tabla presentamos un listado ordenado de la cantidad de noticias recuperadas por provincia sobre el tema **{t}**.   
"""
))
```

Agregamos también la cantidad de entidades obtenidas en el *etiquetado* de los artículos, clasificadas como *personas*, *lugares*, *organizaciones* y *varios*. Estos elementos permiten identificar y eventualmente recuperar entidades reiteradas. Resaltamos que las entidades fueron clasificadas utilizando estrictamente sus características linguísticas, y muchas de ellas tienen un alto grado de certeza. Sin perjuicio dello, para poder relacionar de forma indubitable estas entidades con entidades físicas es preciso cruzar los datos textuales con otros datos. Tarea que reservamos para estudios particulares.   

```{python}
Markdown(tabulate(
  newstat,
  headers=["provincia","cantidad_noticias", "personas", "lugares", "organizaciones", "varios"]
))

```

# Resumen de noticias por ubicación y fecha de publicación

La siguiente tabla presenta las noticias: su ubicación (generalmente provincia desde donde se publica), fecha, titular con el que se publicó en el portal y resumen del artículo (producido por nosotros). El número que aparece en la columna **Ref.Art** es el número de referencia para individualizar el artículo a lo largo de este documento (y en nuestra base de datos).   

```{python}
#| label: tbl-news
#| tbl-cap: Noticias
Markdown(tabulate(
  table_news.reset_index(drop=True),
  headers=['Ref.Art.','Pcia/ot','fecha_art','titular','resumen'],  
  showindex=False,
  maxcolwidths=[1, 10, None, 17, 38],
))

```

```{python} 

```




<!-- In a famous paper, @BC64 introduced a family of transformations \dots -->
<!-- : Manually changed {tbl-colwidths="[50,50]"} -->